<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Vue formulaire héritée pour res.company -->
    <record id="view_company_form_inherit_invoice_automation" model="ir.ui.view">
        <field name="name">res.company.form.inherit.invoice.automation</field>
        <field name="model">res.company</field>
        <field name="inherit_id" ref="base.view_company_form"/>
        <field name="arch" type="xml">
            <xpath expr="//notebook" position="inside">
                <page string="Automatisation Facturation" name="invoice_automation">
                    <group>
                        <group string="Paramètres de Comptabilisation Automatique">
                            <field name="auto_post_sales_invoices"/>
                            <field name="invoice_auto_validation_retry"
                                   invisible="not auto_post_sales_invoices"/>
                            <field name="invoice_auto_log_errors"
                                   invisible="not auto_post_sales_invoices"/>
                        </group>
                        <group string="Options Supplémentaires">
                            <field name="invoice_auto_send_email"
                                   invisible="not auto_post_sales_invoices"/>
                        </group>
                    </group>

                    <div class="alert alert-info" role="alert"
                         invisible="not auto_post_sales_invoices">
                        <i class="fa fa-info-circle"/>
                        <strong>Information :</strong>
                        Lorsque la comptabilisation automatique est activée, les factures créées
                        depuis les ventes seront directement validées. En cas d'erreur (compte manquant,
                        configuration incorrecte, etc.), le système créera la facture en brouillon
                        si l'option de fallback est activée.
                    </div>
                </page>
            </xpath>
        </field>
    </record>
</odoo>
