<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <!-- EN-TÊTE STYLE MODERNE CORPORATE -->
    <template id="header_modern">
        <t t-set="primary" t-value="primary_color or '#1a5276'"/>
        <t t-set="secondary" t-value="secondary_color or '#2980b9'"/>
        <t t-set="accent" t-value="accent_color or '#e74c3c'"/>
        <t t-set="has_logo" t-value="use_logo and header_info.get('logo')"/>

        <div class="bv-header-modern" style="margin-bottom: 25px;">
            <!-- Bande supérieure colorée -->
            <div t-attf-style="background: linear-gradient(135deg, #{primary} 0%, #{secondary} 100%); height: 8px; margin-bottom: 15px;"/>

            <div class="row">
                <!-- Bloc Logo -->
                <div class="col-3" t-if="has_logo">
                    <div t-attf-style="background-color: #{primary}; padding: 15px; border-radius: 8px; text-align: center;">
                        <t t-set="logo_data" t-value="header_info.get('logo')"/>
                        <img t-if="logo_data"
                             t-att-src="'data:image/png;base64,%s' % (logo_data.decode('utf-8') if isinstance(logo_data, bytes) else logo_data)"
                             style="max-height: 80px; max-width: 100%;"/>
                    </div>
                </div>

                <!-- Bloc Titre -->
                <div t-att-class="'col-9' if has_logo else 'col-12'">
                    <div style="padding-left: 15px;">
                        <!-- Titre avec accent -->
                        <h1 t-attf-style="font-size: 36px; font-weight: 900; color: #{primary}; margin: 0; line-height: 1.1;">
                            <t t-esc="header_info.get('title', company.name)"/>
                        </h1>
                        <!-- Barre d'accent -->
                        <div t-attf-style="width: 80px; height: 5px; background-color: #{accent}; margin: 10px 0;"/>
                        <!-- Sous-titre -->
                        <div t-if="header_info.get('subtitle')"
                             t-attf-style="font-size: 18px; color: #{secondary}; font-weight: 600;">
                            <t t-esc="header_info.get('subtitle', '')"/>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Bloc informations avec fond gris -->
            <div style="background-color: #f8f9fa; border-radius: 8px; padding: 12px 20px; margin-top: 15px;">
                <div class="row">
                    <!-- Adresse -->
                    <div class="col-6">
                        <div style="display: flex; align-items: flex-start;">
                            <div t-attf-style="background-color: #{primary}; color: white; padding: 8px 12px; border-radius: 5px; margin-right: 12px; font-size: 14px;">
                                <strong>ADRESSE</strong>
                            </div>
                            <div style="font-size: 13px; color: #333; padding-top: 5px;">
                                <div t-if="header_info.get('address_line1')">
                                    <t t-esc="header_info.get('address_line1', '')"/>
                                </div>
                                <div t-if="header_info.get('address_line2')">
                                    <t t-esc="header_info.get('address_line2', '')"/>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Contacts -->
                    <div class="col-6">
                        <div style="display: flex; align-items: flex-start;">
                            <div t-attf-style="background-color: #{secondary}; color: white; padding: 8px 12px; border-radius: 5px; margin-right: 12px; font-size: 14px;">
                                <strong>CONTACT</strong>
                            </div>
                            <div style="font-size: 13px; color: #333; padding-top: 5px;">
                                <div t-if="header_info.get('phone1') or header_info.get('phone2')">
                                    <strong>Tél:</strong>
                                    <t t-esc="header_info.get('phone1', '')"/>
                                    <t t-if="header_info.get('phone2')"> / <t t-esc="header_info.get('phone2', '')"/></t>
                                </div>
                                <div t-if="header_info.get('mobile')">
                                    <strong>Mob:</strong> <t t-esc="header_info.get('mobile', '')"/>
                                </div>
                                <div t-if="header_info.get('email')">
                                    <strong>Email:</strong> <t t-esc="header_info.get('email', '')"/>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Informations fiscales en bande -->
            <div t-if="header_info.get('rc') or header_info.get('nif') or header_info.get('nis') or header_info.get('ai')"
                 t-attf-style="background-color: #{primary}; color: white; padding: 8px 15px; margin-top: 10px; border-radius: 5px; font-size: 11px;">
                <div class="row text-center">
                    <div class="col-3" t-if="header_info.get('rc')">
                        <strong>RC:</strong> <t t-esc="header_info.get('rc', '')"/>
                    </div>
                    <div class="col-3" t-if="header_info.get('nif')">
                        <strong>NIF:</strong> <t t-esc="header_info.get('nif', '')"/>
                    </div>
                    <div class="col-3" t-if="header_info.get('nis')">
                        <strong>NIS:</strong> <t t-esc="header_info.get('nis', '')"/>
                    </div>
                    <div class="col-3" t-if="header_info.get('ai')">
                        <strong>AI:</strong> <t t-esc="header_info.get('ai', '')"/>
                    </div>
                </div>
            </div>
        </div>
    </template>
</odoo>
