<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Action pour imprimer le bordereau standard -->
    <record id="action_print_recap_simple" model="ir.actions.server">
        <field name="name">Imprimer Bordereau</field>
        <field name="model_id" ref="model_gecafle_reception_recap"/>
        <field name="binding_model_id" ref="model_gecafle_reception_recap"/>
        <field name="state">code</field>
        <field name="code">
if records.filtered(lambda r: r.state != 'valide'):
    raise Warning("Le récapitulatif doit être validé avant impression.")

action = {
    'type': 'ir.actions.report',
    'report_name': 'adi_gecafle_ventes.report_reception_recap',
    'report_type': 'qweb-pdf',
    'data': {'show_commission_pct': False}
}
        </field>
    </record>

    <!-- Action pour imprimer le bordereau avec marges -->
    <record id="action_print_recap_with_commission" model="ir.actions.server">
        <field name="name">Imprimer avec Marges</field>
        <field name="model_id" ref="model_gecafle_reception_recap"/>
        <field name="binding_model_id" ref="model_gecafle_reception_recap"/>
        <field name="state">code</field>
        <field name="code">
if records.filtered(lambda r: r.state != 'valide'):
    raise Warning("Le récapitulatif doit être validé avant impression.")

action = {
    'type': 'ir.actions.report',
    'report_name': 'adi_gecafle_ventes.report_reception_recap',
    'report_type': 'qweb-pdf',
    'data': {'show_commission_pct': True}
}
        </field>
    </record>
</odoo>
