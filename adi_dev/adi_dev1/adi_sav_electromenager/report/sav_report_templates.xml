<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- ========== TEMPLATE 1: BON DE LIVRAISON CENTRE → RÉPARATEUR ========== -->
    <template id="report_delivery_to_repairer">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="doc">
                <t t-call="web.external_layout">
                    <div class="page">
                        <h2 class="text-center mb-4">
                            <strong>BON DE LIVRAISON AU RÉPARATEUR</strong>
                        </h2>

                        <!-- Infos header -->
                        <div class="row">
                            <div class="col-6">
                                <strong>Référence:</strong> <span t-field="doc.name"/><br/>
                                <strong>Date Envoi:</strong> <span t-field="doc.date_sent_to_repairer"/><br/>
                            </div>
                            <div class="col-6">
                                <strong>Expéditeur (Centre):</strong><br/>
                                <span t-field="doc.return_center_id.name"/><br/>
                                <span t-field="doc.return_center_id.street"/><br/>
                                <span t-field="doc.return_center_id.city"/>
                            </div>
                        </div>

                        <div class="row mt-3">
                            <div class="col-6">
                                <div style="border: 2px solid #000; padding: 10px;">
                                    <strong>Destinataire (Réparateur):</strong><br/>
                                    <h5><span t-field="doc.repairer_id.name"/></h5>
                                    <span t-field="doc.repairer_id.street"/><br/>
                                    <span t-field="doc.repairer_id.city"/>
                                </div>
                            </div>
                        </div>

                        <!-- Table des articles -->
                        <h4 class="mt-4">Articles à Réparer:</h4>
                        <table class="table table-sm table-bordered">
                            <thead>
                                <tr style="background-color: #f5f5f5;">
                                    <th width="5%">N°</th>
                                    <th width="35%">Produit</th>
                                    <th width="20%">N° Série</th>
                                    <th width="20%">Catégorie</th>
                                    <th width="20%">Motif</th>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-foreach="doc.line_ids" t-as="line">
                                    <tr>
                                        <td><span t-esc="line_index + 1"/></td>
                                        <td><span t-field="line.product_id.name"/></td>
                                        <td><strong><span t-field="line.serial_number"/></strong></td>
                                        <td><span t-field="line.category_id.name"/></td>
                                        <td><span t-field="line.fault_type_id.name"/></td>
                                    </tr>
                                </t>
                            </tbody>
                        </table>

                        <p class="mt-3">
                            <strong>Total Articles:</strong> <span t-esc="doc.total_articles"/>
                        </p>

                        <!-- Observations -->
                        <div class="mt-3" t-if="doc.observations">
                            <strong>Observations:</strong><br/>
                            <span t-field="doc.observations"/>
                        </div>

                        <!-- Signatures -->
                        <div class="row mt-5">
                            <div class="col-6 text-center">
                                <p>________________________________</p>
                                <p><strong>Signature Centre de Retour</strong></p>
                            </div>
                            <div class="col-6 text-center">
                                <p>________________________________</p>
                                <p><strong>Signature Réparateur (Réception)</strong></p>
                            </div>
                        </div>
                    </div>
                </t>
            </t>
        </t>
    </template>

    <!-- ========== TEMPLATE 2: BON DE RETOUR RÉPARATEUR → CENTRE ========== -->
    <template id="report_return_from_repairer">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="doc">
                <t t-call="web.external_layout">
                    <div class="page">
                        <h2 class="text-center mb-4">
                            <strong>BON DE RETOUR DU RÉPARATEUR</strong>
                        </h2>

                        <!-- Infos header -->
                        <div class="row">
                            <div class="col-6">
                                <strong>Référence:</strong> <span t-field="doc.name"/><br/>
                                <strong>Date Retour:</strong> <span t-field="doc.date_returned_to_center"/><br/>
                            </div>
                            <div class="col-6">
                                <strong>Expéditeur (Réparateur):</strong><br/>
                                <span t-field="doc.repairer_id.name"/><br/>
                                <span t-field="doc.repairer_id.street"/><br/>
                                <span t-field="doc.repairer_id.city"/>
                            </div>
                        </div>

                        <div class="row mt-3">
                            <div class="col-6">
                                <div style="border: 2px solid #000; padding: 10px;">
                                    <strong>Destinataire (Centre):</strong><br/>
                                    <h5><span t-field="doc.return_center_id.name"/></h5>
                                    <span t-field="doc.return_center_id.street"/><br/>
                                    <span t-field="doc.return_center_id.city"/>
                                </div>
                            </div>
                        </div>

                        <!-- Table des articles réparés -->
                        <h4 class="mt-4">Articles Réparés:</h4>
                        <table class="table table-sm table-bordered">
                            <thead>
                                <tr style="background-color: #f5f5f5;">
                                    <th width="5%">N°</th>
                                    <th width="30%">Produit</th>
                                    <th width="15%">N° Série</th>
                                    <th width="20%">Statut</th>
                                    <th width="30%">Notes Réparation</th>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-foreach="doc.line_ids" t-as="line">
                                    <tr t-att-class="'table-success' if line.repair_status in ['repaired', 'replaced'] else 'table-danger' if line.repair_status == 'not_repairable' else ''">
                                        <td><span t-esc="line_index + 1"/></td>
                                        <td><span t-field="line.product_id.name"/></td>
                                        <td><strong><span t-field="line.serial_number"/></strong></td>
                                        <td>
                                            <span t-if="line.repair_status == 'repaired'" class="badge text-bg-success">Réparé</span>
                                            <span t-if="line.repair_status == 'replaced'" class="badge text-bg-primary">Changé</span>
                                            <span t-if="line.repair_status == 'not_repairable'" class="badge text-bg-danger">Non Réparable</span>
                                            <span t-if="line.repair_status == 'rejected'" class="badge text-bg-warning">Refusé</span>
                                        </td>
                                        <td><span t-field="line.repair_notes"/></td>
                                    </tr>
                                </t>
                            </tbody>
                        </table>

                        <!-- Résumé -->
                        <div class="row mt-3">
                            <div class="col-12">
                                <p>
                                    <strong>Résumé:</strong>
                                    <span t-esc="doc.total_repaired"/> réparé(s),
                                    <span t-esc="doc.total_not_repaired"/> non réparable(s)
                                </p>
                            </div>
                        </div>

                        <!-- Signatures -->
                        <div class="row mt-5">
                            <div class="col-6 text-center">
                                <p>________________________________</p>
                                <p><strong>Signature Réparateur</strong></p>
                            </div>
                            <div class="col-6 text-center">
                                <p>________________________________</p>
                                <p><strong>Signature Centre (Réception)</strong></p>
                            </div>
                        </div>
                    </div>
                </t>
            </t>
        </t>
    </template>

    <!-- ========== TEMPLATE 3: BON DE LIVRAISON CENTRE → POINT DE VENTE ========== -->
    <template id="report_delivery_to_sales_point">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="doc">
                <t t-call="web.external_layout">
                    <div class="page">
                        <h2 class="text-center mb-4">
                            <strong>BON DE LIVRAISON AU POINT DE VENTE</strong>
                        </h2>

                        <!-- Infos header -->
                        <div class="row">
                            <div class="col-6">
                                <strong>Référence:</strong> <span t-field="doc.name"/><br/>
                                <strong>Date Envoi:</strong> <span t-field="doc.date_sent_to_sales_point"/><br/>
                            </div>
                            <div class="col-6">
                                <strong>Expéditeur (Centre):</strong><br/>
                                <span t-field="doc.return_center_id.name"/><br/>
                                <span t-field="doc.return_center_id.street"/><br/>
                                <span t-field="doc.return_center_id.city"/>
                            </div>
                        </div>

                        <div class="row mt-3">
                            <div class="col-6">
                                <div style="border: 2px solid #000; padding: 10px;">
                                    <strong>Destinataire (Point de Vente):</strong><br/>
                                    <h5><span t-field="doc.sales_point_id.name"/></h5>
                                    <span t-field="doc.sales_point_id.street"/><br/>
                                    <span t-field="doc.sales_point_id.city"/>
                                </div>
                            </div>
                        </div>

                        <!-- Table des articles retournés -->
                        <h4 class="mt-4">Articles Retournés:</h4>
                        <table class="table table-sm table-bordered">
                            <thead>
                                <tr style="background-color: #f5f5f5;">
                                    <th width="5%">N°</th>
                                    <th width="30%">Produit</th>
                                    <th width="15%">N° Série</th>
                                    <th width="20%">Statut Final</th>
                                    <th width="30%">Notes</th>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-foreach="doc.line_ids" t-as="line">
                                    <tr t-att-class="'table-success' if line.repair_status in ['repaired', 'replaced'] else 'table-danger'">
                                        <td><span t-esc="line_index + 1"/></td>
                                        <td><span t-field="line.product_id.name"/></td>
                                        <td><strong><span t-field="line.serial_number"/></strong></td>
                                        <td>
                                            <span t-if="line.repair_status == 'repaired'" class="badge text-bg-success">Réparé</span>
                                            <span t-if="line.repair_status == 'replaced'" class="badge text-bg-primary">Changé</span>
                                            <span t-if="line.repair_status == 'not_repairable'" class="badge text-bg-danger">Non Réparable</span>
                                            <span t-if="line.repair_status == 'rejected'" class="badge text-bg-warning">Refusé</span>
                                        </td>
                                        <td><span t-field="line.repair_notes"/></td>
                                    </tr>
                                </t>
                            </tbody>
                        </table>

                        <!-- Résumé -->
                        <div class="row mt-3">
                            <div class="col-12">
                                <p>
                                    <strong>Résumé:</strong>
                                    Total <span t-esc="doc.total_articles"/> article(s),
                                    <span t-esc="doc.total_repaired"/> réparé(s),
                                    <span t-esc="doc.total_not_repaired"/> non réparable(s)
                                </p>
                            </div>
                        </div>

                        <!-- Signatures -->
                        <div class="row mt-5">
                            <div class="col-6 text-center">
                                <p>________________________________</p>
                                <p><strong>Signature Centre de Retour</strong></p>
                            </div>
                            <div class="col-6 text-center">
                                <p>________________________________</p>
                                <p><strong>Signature Point de Vente (Réception)</strong></p>
                            </div>
                        </div>
                    </div>
                </t>
            </t>
        </t>
    </template>

    <!-- ========== TEMPLATE 4: BON DE LIVRAISON CENTRE → USINE ========== -->
    <template id="report_delivery_to_factory">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="doc">
                <t t-call="web.external_layout">
                    <div class="page">
                        <h2 class="text-center mb-4">
                            <strong>BON DE LIVRAISON À L'USINE</strong>
                        </h2>

                        <!-- Infos header -->
                        <div class="row">
                            <div class="col-6">
                                <strong>Référence:</strong> <span t-field="doc.name"/><br/>
                                <strong>Date Envoi:</strong> <span t-field="doc.date_sent_to_factory"/><br/>
                            </div>
                            <div class="col-6">
                                <strong>Expéditeur (Centre):</strong><br/>
                                <span t-field="doc.return_center_id.name"/><br/>
                                <span t-field="doc.return_center_id.street"/><br/>
                                <span t-field="doc.return_center_id.city"/>
                            </div>
                        </div>

                        <div class="row mt-3">
                            <div class="col-6">
                                <div style="border: 2px solid #000; padding: 10px;">
                                    <strong>Destinataire (Usine):</strong><br/>
                                    <h5><span t-field="doc.factory_id.name"/></h5>
                                    <span t-field="doc.factory_id.street"/><br/>
                                    <span t-field="doc.factory_id.city"/>
                                </div>
                            </div>
                        </div>

                        <!-- Table des articles non réparables -->
                        <h4 class="mt-4">Articles Non Réparables:</h4>
                        <table class="table table-sm table-bordered">
                            <thead>
                                <tr style="background-color: #f5f5f5;">
                                    <th width="5%">N°</th>
                                    <th width="25%">Produit</th>
                                    <th width="15%">N° Série</th>
                                    <th width="20%">Motif d'Échec</th>
                                    <th width="35%">Notes</th>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-set="counter" t-value="0"/>
                                <t t-foreach="doc.line_ids.filtered(lambda l: l.repair_status == 'not_repairable' and l.failure_reason_id)" t-as="line">
                                    <t t-set="counter" t-value="counter + 1"/>
                                    <tr>
                                        <td><span t-esc="counter"/></td>
                                        <td><span t-field="line.product_id.name"/></td>
                                        <td><strong><span t-field="line.serial_number"/></strong></td>
                                        <td><span t-field="line.failure_reason_id.name"/></td>
                                        <td><span t-field="line.failure_notes"/></td>
                                    </tr>
                                </t>
                            </tbody>
                        </table>

                        <p class="mt-3">
                            <strong>Total Articles:</strong> <span t-esc="doc.total_sent_to_factory"/>
                        </p>

                        <!-- Signatures -->
                        <div class="row mt-5">
                            <div class="col-6 text-center">
                                <p>________________________________</p>
                                <p><strong>Signature Centre de Retour</strong></p>
                            </div>
                            <div class="col-6 text-center">
                                <p>________________________________</p>
                                <p><strong>Signature Usine (Réception)</strong></p>
                            </div>
                        </div>
                    </div>
                </t>
            </t>
        </t>
    </template>

    <!-- ========== TEMPLATE 5: BON DE RETOUR USINE → CENTRE ========== -->
    <template id="report_return_from_factory">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="doc">
                <t t-call="web.external_layout">
                    <div class="page">
                        <h2 class="text-center mb-4">
                            <strong>BON DE RETOUR DE L'USINE</strong>
                        </h2>

                        <!-- Infos header -->
                        <div class="row">
                            <div class="col-6">
                                <strong>Référence:</strong> <span t-field="doc.name"/><br/>
                                <strong>Date Retour:</strong> <span t-field="doc.date_returned_from_factory"/><br/>
                            </div>
                            <div class="col-6">
                                <strong>Expéditeur (Usine):</strong><br/>
                                <span t-field="doc.factory_id.name"/><br/>
                                <span t-field="doc.factory_id.street"/><br/>
                                <span t-field="doc.factory_id.city"/>
                            </div>
                        </div>

                        <div class="row mt-3">
                            <div class="col-6">
                                <div style="border: 2px solid #000; padding: 10px;">
                                    <strong>Destinataire (Centre):</strong><br/>
                                    <h5><span t-field="doc.return_center_id.name"/></h5>
                                    <span t-field="doc.return_center_id.street"/><br/>
                                    <span t-field="doc.return_center_id.city"/>
                                </div>
                            </div>
                        </div>

                        <!-- Table des articles traités -->
                        <h4 class="mt-4">Articles Traités par l'Usine:</h4>
                        <table class="table table-sm table-bordered">
                            <thead>
                                <tr style="background-color: #f5f5f5;">
                                    <th width="5%">N°</th>
                                    <th width="20%">Produit</th>
                                    <th width="12%">N° Série</th>
                                    <th width="15%">Décision</th>
                                    <th width="13%">N° Remplacement</th>
                                    <th width="35%">Notes Usine</th>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-set="counter" t-value="0"/>
                                <t t-foreach="doc.line_ids.filtered(lambda l: l.factory_decision)" t-as="line">
                                    <t t-set="counter" t-value="counter + 1"/>
                                    <tr t-att-class="'table-success' if line.factory_decision in ['factory_repaired', 'factory_replaced'] else 'table-info'">
                                        <td><span t-esc="counter"/></td>
                                        <td><span t-field="line.product_id.name"/></td>
                                        <td><strong><span t-field="line.serial_number"/></strong></td>
                                        <td>
                                            <span t-if="line.factory_decision == 'factory_repaired'" class="badge text-bg-success">Réparé</span>
                                            <span t-if="line.factory_decision == 'factory_replaced'" class="badge text-bg-primary">Remplacé</span>
                                            <span t-if="line.factory_decision == 'factory_credited'" class="badge text-bg-info">Avoir</span>
                                        </td>
                                        <td><span t-field="line.replacement_serial_number"/></td>
                                        <td><span t-field="line.factory_notes"/></td>
                                    </tr>
                                </t>
                            </tbody>
                        </table>

                        <!-- Résumé -->
                        <div class="row mt-3">
                            <div class="col-12">
                                <p>
                                    <strong>Résumé:</strong>
                                    <span t-esc="doc.total_factory_repaired"/> réparé(s) par usine,
                                    <span t-esc="doc.total_factory_replaced"/> remplacé(s),
                                    <span t-esc="doc.total_factory_credited"/> avoir(s)
                                </p>
                            </div>
                        </div>

                        <!-- Signatures -->
                        <div class="row mt-5">
                            <div class="col-6 text-center">
                                <p>________________________________</p>
                                <p><strong>Signature Usine</strong></p>
                            </div>
                            <div class="col-6 text-center">
                                <p>________________________________</p>
                                <p><strong>Signature Centre (Réception)</strong></p>
                            </div>
                        </div>
                    </div>
                </t>
            </t>
        </t>
    </template>

    <!-- ========== TEMPLATE 6: BON DE LIVRAISON POINT DE VENTE → CENTRE ========== -->
    <template id="report_delivery_from_sales_point">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="doc">
                <t t-call="web.external_layout">
                    <div class="page">
                        <h2 class="text-center mb-4">
                            <strong>BON DE LIVRAISON AU CENTRE DE RETOUR</strong>
                        </h2>

                        <!-- Infos header -->
                        <div class="row">
                            <div class="col-6">
                                <strong>Référence:</strong> <span t-field="doc.name"/><br/>
                                <strong>Date:</strong> <span t-field="doc.date"/><br/>
                                <strong>Date Soumission:</strong> <span t-field="doc.date_submission"/><br/>
                            </div>
                            <div class="col-6">
                                <strong>Expéditeur (Point de Vente):</strong><br/>
                                <span t-field="doc.sales_point_id.name"/><br/>
                                <span t-field="doc.sales_point_id.street"/><br/>
                                <span t-field="doc.sales_point_id.city"/>
                            </div>
                        </div>

                        <div class="row mt-3">
                            <div class="col-6">
                                <div style="border: 2px solid #000; padding: 10px;">
                                    <strong>Destinataire (Centre de Retour):</strong><br/>
                                    <h5><span t-field="doc.return_center_id.name"/></h5>
                                    <span t-field="doc.return_center_id.street"/><br/>
                                    <span t-field="doc.return_center_id.city"/>
                                </div>
                            </div>
                            <div class="col-6" t-if="doc.partner_id">
                                <div style="border: 1px solid #ccc; padding: 10px;">
                                    <strong>Client Final:</strong><br/>
                                    <span t-field="doc.partner_id.name"/><br/>
                                    <span t-field="doc.partner_id.phone"/>
                                </div>
                            </div>
                        </div>

                        <!-- Table des articles -->
                        <h4 class="mt-4">Articles Retournés pour SAV:</h4>
                        <table class="table table-sm table-bordered">
                            <thead>
                                <tr style="background-color: #f5f5f5;">
                                    <th width="5%">N°</th>
                                    <th width="30%">Produit</th>
                                    <th width="15%">N° Série</th>
                                    <th width="15%">Catégorie</th>
                                    <th width="15%">Type Panne</th>
                                    <th width="20%">État</th>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-foreach="doc.line_ids" t-as="line">
                                    <tr>
                                        <td><span t-esc="line_index + 1"/></td>
                                        <td><span t-field="line.product_id.name"/></td>
                                        <td><strong><span t-field="line.serial_number"/></strong></td>
                                        <td><span t-field="line.category_id.name"/></td>
                                        <td><span t-field="line.fault_type_id.name"/></td>
                                        <td><span t-field="line.product_condition"/></td>
                                    </tr>
                                </t>
                            </tbody>
                        </table>

                        <p class="mt-3">
                            <strong>Total Articles:</strong> <span t-esc="doc.total_articles"/>
                        </p>

                        <!-- Observations -->
                        <div class="mt-3" t-if="doc.observations">
                            <strong>Observations:</strong><br/>
                            <span t-field="doc.observations"/>
                        </div>

                        <!-- Signatures -->
                        <div class="row mt-5">
                            <div class="col-6 text-center">
                                <p>________________________________</p>
                                <p><strong>Signature Point de Vente</strong></p>
                            </div>
                            <div class="col-6 text-center">
                                <p>________________________________</p>
                                <p><strong>Signature Centre (Réception)</strong></p>
                            </div>
                        </div>
                    </div>
                </t>
            </t>
        </t>
    </template>

    <!-- ========== TEMPLATE 7: BON DE RÉCEPTION POINT DE VENTE ========== -->
    <template id="report_reception_sales_point">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="doc">
                <t t-call="web.external_layout">
                    <div class="page">
                        <h2 class="text-center mb-4">
                            <strong>BON DE RÉCEPTION - POINT DE VENTE</strong>
                        </h2>

                        <!-- Infos header -->
                        <div class="row">
                            <div class="col-6">
                                <strong>Référence:</strong> <span t-field="doc.name"/><br/>
                                <strong>Date Réception:</strong> <span t-field="doc.date_closed"/><br/>
                                <strong>Date Retour Initial:</strong> <span t-field="doc.date"/><br/>
                            </div>
                            <div class="col-6">
                                <strong>Réceptionné par (Point de Vente):</strong><br/>
                                <h5><span t-field="doc.sales_point_id.name"/></h5>
                                <span t-field="doc.sales_point_id.street"/><br/>
                                <span t-field="doc.sales_point_id.city"/>
                            </div>
                        </div>

                        <div class="row mt-3" t-if="doc.partner_id">
                            <div class="col-6">
                                <div style="border: 1px solid #ccc; padding: 10px;">
                                    <strong>Client Final:</strong><br/>
                                    <span t-field="doc.partner_id.name"/><br/>
                                    <span t-field="doc.partner_id.phone"/>
                                </div>
                            </div>
                        </div>

                        <!-- Table des articles reçus -->
                        <h4 class="mt-4">Articles Reçus:</h4>
                        <table class="table table-sm table-bordered">
                            <thead>
                                <tr style="background-color: #f5f5f5;">
                                    <th width="5%">N°</th>
                                    <th width="25%">Produit</th>
                                    <th width="12%">N° Série</th>
                                    <th width="15%">Statut Final</th>
                                    <th width="15%">Traitement</th>
                                    <th width="28%">Notes</th>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-foreach="doc.line_ids" t-as="line">
                                    <tr t-att-class="'table-success' if line.repair_status in ['repaired', 'replaced'] or line.factory_decision in ['factory_repaired', 'factory_replaced'] else 'table-warning' if line.factory_decision == 'factory_credited' else 'table-danger'">
                                        <td><span t-esc="line_index + 1"/></td>
                                        <td><span t-field="line.product_id.name"/></td>
                                        <td><strong><span t-field="line.serial_number"/></strong></td>
                                        <td>
                                            <t t-if="line.factory_decision">
                                                <span t-if="line.factory_decision == 'factory_repaired'" class="badge text-bg-success">Réparé (Usine)</span>
                                                <span t-if="line.factory_decision == 'factory_replaced'" class="badge text-bg-primary">Remplacé (Usine)</span>
                                                <span t-if="line.factory_decision == 'factory_credited'" class="badge text-bg-warning">Avoir</span>
                                            </t>
                                            <t t-else="">
                                                <span t-if="line.repair_status == 'repaired'" class="badge text-bg-success">Réparé</span>
                                                <span t-if="line.repair_status == 'replaced'" class="badge text-bg-primary">Changé</span>
                                                <span t-if="line.repair_status == 'not_repairable'" class="badge text-bg-danger">Non Réparable</span>
                                                <span t-if="line.repair_status == 'rejected'" class="badge text-bg-warning">Refusé</span>
                                            </t>
                                        </td>
                                        <td>
                                            <span t-if="line.factory_decision">Usine</span>
                                            <span t-else="">Réparateur</span>
                                        </td>
                                        <td>
                                            <span t-if="line.factory_decision == 'factory_replaced' and line.replacement_serial_number">
                                                Nouveau N°: <span t-field="line.replacement_serial_number"/>
                                            </span>
                                            <span t-elif="line.repair_notes" t-field="line.repair_notes"/>
                                        </td>
                                    </tr>
                                </t>
                            </tbody>
                        </table>

                        <!-- Résumé -->
                        <div class="row mt-3">
                            <div class="col-12">
                                <table class="table table-sm" style="width: auto;">
                                    <tr>
                                        <td><strong>Total Articles:</strong></td>
                                        <td><span t-esc="doc.total_articles"/></td>
                                    </tr>
                                    <tr class="table-success">
                                        <td><strong>Réparés (Réparateur):</strong></td>
                                        <td><span t-esc="doc.total_repaired"/></td>
                                    </tr>
                                    <tr t-if="doc.total_sent_to_factory > 0" class="table-info">
                                        <td><strong>Traités par Usine:</strong></td>
                                        <td>
                                            <span t-esc="doc.total_factory_repaired"/> réparé(s),
                                            <span t-esc="doc.total_factory_replaced"/> remplacé(s),
                                            <span t-esc="doc.total_factory_credited"/> avoir(s)
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>

                        <!-- Signatures -->
                        <div class="row mt-5">
                            <div class="col-4 text-center">
                                <p>________________________________</p>
                                <p><strong>Signature Point de Vente</strong></p>
                            </div>
                            <div class="col-4 text-center">
                                <p>________________________________</p>
                                <p><strong>Signature Livreur</strong></p>
                            </div>
                            <div class="col-4 text-center" t-if="doc.partner_id">
                                <p>________________________________</p>
                                <p><strong>Signature Client</strong></p>
                            </div>
                        </div>
                    </div>
                </t>
            </t>
        </t>
    </template>

</odoo>
